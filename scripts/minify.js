const _m=require("uglify-js").minify;const _p=require("path");const _f=require("fs");function walk(s,e){let f=[];_f.readdir(s,(i,t)=>{if(i)return e(i);let r=t.length;if(!r)e(null,f);t.forEach(n=>{n=_p.resolve(s,n);_f.stat(n,(i,t)=>{if(t&&t.isDirectory()){walk(n,(i,t)=>{f=f.concat(t);if(!--r)e(null,f)})}else{f.push(n);if(!--r)e(null,f)}})})})}function _mOut(){const i="./out/src";const t=walk(i,(i,t)=>{const r=[];t.forEach(i=>{if(!i.endsWith(".js"))return;if(i.split("/").pop().startsWith("_"))return;const t=_f.readFileSync(i,"utf8");const n=_m(t,{mangle:!0});if(n.error)return;_f.unlinkSync(i);_f.writeFileSync(i,n.code);r.push(i)})})}_mOut();